function cov_2dy2lgt9pt(){var path="/Users/abhis/Documents/python/splunk-sdk-javascript/examples/node/helloworld/endpoint_instantiation.js";var hash="73d2c5710a3fd519fbf7d74d83b4b85a8443a828";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/abhis/Documents/python/splunk-sdk-javascript/examples/node/helloworld/endpoint_instantiation.js",statementMap:{"0":{start:{line:16,column:15},end:{line:16,column:40}},"1":{start:{line:40,column:0},end:{line:49,column:3}},"2":{start:{line:42,column:8},end:{line:42,column:74}},"3":{start:{line:46,column:8},end:{line:46,column:25}},"4":{start:{line:47,column:8},end:{line:47,column:53}},"5":{start:{line:54,column:0},end:{line:69,column:3}},"6":{start:{line:58,column:8},end:{line:58,column:36}},"7":{start:{line:62,column:30},end:{line:62,column:75}},"8":{start:{line:63,column:8},end:{line:63,column:84}},"9":{start:{line:67,column:8},end:{line:67,column:53}},"10":{start:{line:74,column:0},end:{line:76,column:2}},"11":{start:{line:75,column:4},end:{line:75,column:55}},"12":{start:{line:78,column:0},end:{line:124,column:2}},"13":{start:{line:80,column:4},end:{line:80,column:22}},"14":{start:{line:82,column:19},end:{line:82,column:46}},"15":{start:{line:83,column:19},end:{line:83,column:49}},"16":{start:{line:84,column:19},end:{line:84,column:46}},"17":{start:{line:85,column:19},end:{line:85,column:50}},"18":{start:{line:86,column:19},end:{line:86,column:45}},"19":{start:{line:87,column:19},end:{line:87,column:48}},"20":{start:{line:89,column:18},end:{line:96,column:6}},"21":{start:{line:99,column:4},end:{line:123,column:7}},"22":{start:{line:102,column:8},end:{line:106,column:9}},"23":{start:{line:103,column:12},end:{line:103,column:47}},"24":{start:{line:104,column:12},end:{line:104,column:40}},"25":{start:{line:105,column:12},end:{line:105,column:19}},"26":{start:{line:109,column:8},end:{line:122,column:11}},"27":{start:{line:110,column:12},end:{line:114,column:13}},"28":{start:{line:111,column:16},end:{line:111,column:85}},"29":{start:{line:112,column:16},end:{line:112,column:26}},"30":{start:{line:113,column:16},end:{line:113,column:23}},"31":{start:{line:116,column:12},end:{line:116,column:41}},"32":{start:{line:117,column:28},end:{line:117,column:40}},"33":{start:{line:118,column:12},end:{line:120,column:13}},"34":{start:{line:118,column:25},end:{line:118,column:26}},"35":{start:{line:119,column:16},end:{line:119,column:64}},"36":{start:{line:121,column:12},end:{line:121,column:19}},"37":{start:{line:126,column:0},end:{line:128,column:1}},"38":{start:{line:127,column:4},end:{line:127,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:41,column:10},end:{line:41,column:11}},loc:{start:{line:41,column:21},end:{line:43,column:5}},line:41},"1":{name:"(anonymous_1)",decl:{start:{line:45,column:10},end:{line:45,column:11}},loc:{start:{line:45,column:45},end:{line:48,column:5}},line:45},"2":{name:"(anonymous_2)",decl:{start:{line:57,column:10},end:{line:57,column:11}},loc:{start:{line:57,column:21},end:{line:59,column:5}},line:57},"3":{name:"(anonymous_3)",decl:{start:{line:61,column:23},end:{line:61,column:24}},loc:{start:{line:61,column:39},end:{line:64,column:5}},line:61},"4":{name:"(anonymous_4)",decl:{start:{line:66,column:10},end:{line:66,column:11}},loc:{start:{line:66,column:39},end:{line:68,column:5}},line:66},"5":{name:"(anonymous_5)",decl:{start:{line:74,column:35},end:{line:74,column:36}},loc:{start:{line:74,column:55},end:{line:76,column:1}},line:74},"6":{name:"(anonymous_6)",decl:{start:{line:78,column:15},end:{line:78,column:16}},loc:{start:{line:78,column:36},end:{line:124,column:1}},line:78},"7":{name:"(anonymous_7)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:41},end:{line:123,column:5}},line:99},"8":{name:"(anonymous_8)",decl:{start:{line:109,column:59},end:{line:109,column:60}},loc:{start:{line:109,column:85},end:{line:122,column:9}},line:109},"9":{name:"(anonymous_9)",decl:{start:{line:127,column:21},end:{line:127,column:22}},loc:{start:{line:127,column:32},end:{line:127,column:34}},line:127}},branchMap:{"0":{loc:{start:{line:80,column:11},end:{line:80,column:21}},type:"binary-expr",locations:[{start:{line:80,column:11},end:{line:80,column:15}},{start:{line:80,column:19},end:{line:80,column:21}}],line:80},"1":{loc:{start:{line:82,column:19},end:{line:82,column:46}},type:"binary-expr",locations:[{start:{line:82,column:19},end:{line:82,column:32}},{start:{line:82,column:39},end:{line:82,column:46}}],line:82},"2":{loc:{start:{line:83,column:19},end:{line:83,column:49}},type:"binary-expr",locations:[{start:{line:83,column:19},end:{line:83,column:32}},{start:{line:83,column:39},end:{line:83,column:49}}],line:83},"3":{loc:{start:{line:84,column:19},end:{line:84,column:46}},type:"binary-expr",locations:[{start:{line:84,column:19},end:{line:84,column:30}},{start:{line:84,column:39},end:{line:84,column:46}}],line:84},"4":{loc:{start:{line:85,column:19},end:{line:85,column:50}},type:"binary-expr",locations:[{start:{line:85,column:19},end:{line:85,column:28}},{start:{line:85,column:39},end:{line:85,column:50}}],line:85},"5":{loc:{start:{line:86,column:19},end:{line:86,column:45}},type:"binary-expr",locations:[{start:{line:86,column:19},end:{line:86,column:28}},{start:{line:86,column:39},end:{line:86,column:45}}],line:86},"6":{loc:{start:{line:87,column:19},end:{line:87,column:48}},type:"binary-expr",locations:[{start:{line:87,column:19},end:{line:87,column:31}},{start:{line:87,column:39},end:{line:87,column:48}}],line:87},"7":{loc:{start:{line:102,column:8},end:{line:106,column:9}},type:"if",locations:[{start:{line:102,column:8},end:{line:106,column:9}},{start:{line:102,column:8},end:{line:106,column:9}}],line:102},"8":{loc:{start:{line:102,column:12},end:{line:102,column:27}},type:"binary-expr",locations:[{start:{line:102,column:12},end:{line:102,column:15}},{start:{line:102,column:19},end:{line:102,column:27}}],line:102},"9":{loc:{start:{line:104,column:17},end:{line:104,column:38}},type:"binary-expr",locations:[{start:{line:104,column:17},end:{line:104,column:20}},{start:{line:104,column:24},end:{line:104,column:38}}],line:104},"10":{loc:{start:{line:110,column:12},end:{line:114,column:13}},type:"if",locations:[{start:{line:110,column:12},end:{line:114,column:13}},{start:{line:110,column:12},end:{line:114,column:13}}],line:110},"11":{loc:{start:{line:126,column:0},end:{line:128,column:1}},type:"if",locations:[{start:{line:126,column:0},end:{line:128,column:1}},{start:{line:126,column:0},end:{line:128,column:1}}],line:126}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"73d2c5710a3fd519fbf7d74d83b4b85a8443a828"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2dy2lgt9pt=function(){return actualCoverage;};}return actualCoverage;}cov_2dy2lgt9pt();// Copyright 2015 Splunk, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License"): you may
// not use this file except in compliance with the License. You may obtain
// a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
// License for the specific language governing permissions and limitations
// under the License.
var splunkjs=(cov_2dy2lgt9pt().s[0]++,require('../../../index'));// This example will show you how to add a new REST API endpoint
// to the Splunk SDK for JavaScript.
//
// The JavaScript SDK has the authorization roles REST API endpoint
// path defined, but doesn't implement it.
// To add a new path, we would add the following:
//
// `splunkjs.Paths.roles = "authorization/roles";`
//
// Be sure to avoid naming collisions!
//
// Depending on the endpoint, you may need to prepend `/services/`
// when defining the path.
// For example the server info REST API endpoint path is defined as:
//
// `"/services/server/info"`
//
// For more information, please refer to the REST API documentation
// at http://docs.splunk.com/Documentation/Splunk/latest/RESTREF/RESTprolog
// Here we're adding a new entity to splunkjs, which will be
// used by the collection we'll add below.
cov_2dy2lgt9pt().s[1]++;splunkjs.Service.Role=splunkjs.Service.Entity.extend({path:function(){cov_2dy2lgt9pt().f[0]++;cov_2dy2lgt9pt().s[2]++;return splunkjs.Paths.roles+"/"+encodeURIComponent(this.name);},init:function(service,name,namespace){cov_2dy2lgt9pt().f[1]++;cov_2dy2lgt9pt().s[3]++;this.name=name;cov_2dy2lgt9pt().s[4]++;this._super(service,this.path(),namespace);}});// Here we're adding a new collection to splunkjs, which
// uses the Role entity we just defined.
// See the `instantiateEntity()` function.
cov_2dy2lgt9pt().s[5]++;splunkjs.Service.Roles=splunkjs.Service.Collection.extend({fetchOnEntityCreation:true,path:function(){cov_2dy2lgt9pt().f[2]++;cov_2dy2lgt9pt().s[6]++;return splunkjs.Paths.roles;},instantiateEntity:function(props){cov_2dy2lgt9pt().f[3]++;var entityNamespace=(cov_2dy2lgt9pt().s[7]++,splunkjs.Utils.namespaceFromProperties(props));cov_2dy2lgt9pt().s[8]++;return new splunkjs.Service.Role(this.service,props.name,entityNamespace);},init:function(service,namespace){cov_2dy2lgt9pt().f[4]++;cov_2dy2lgt9pt().s[9]++;this._super(service,this.path(),namespace);}});// To finish off integrating the new endpoint,
// we need to add a function to the service object
// which will retrieve the Roles collection.
cov_2dy2lgt9pt().s[10]++;splunkjs.Service.prototype.roles=function(namespace){cov_2dy2lgt9pt().f[5]++;cov_2dy2lgt9pt().s[11]++;return new splunkjs.Service.Roles(this,namespace);};cov_2dy2lgt9pt().s[12]++;exports.main=function(opts,done){cov_2dy2lgt9pt().f[6]++;cov_2dy2lgt9pt().s[13]++;// This is just for testing - ignore it
opts=(cov_2dy2lgt9pt().b[0][0]++,opts)||(cov_2dy2lgt9pt().b[0][1]++,{});var username=(cov_2dy2lgt9pt().s[14]++,(cov_2dy2lgt9pt().b[1][0]++,opts.username)||(cov_2dy2lgt9pt().b[1][1]++,"admin"));var password=(cov_2dy2lgt9pt().s[15]++,(cov_2dy2lgt9pt().b[2][0]++,opts.password)||(cov_2dy2lgt9pt().b[2][1]++,"changed!"));var scheme=(cov_2dy2lgt9pt().s[16]++,(cov_2dy2lgt9pt().b[3][0]++,opts.scheme)||(cov_2dy2lgt9pt().b[3][1]++,"https"));var host=(cov_2dy2lgt9pt().s[17]++,(cov_2dy2lgt9pt().b[4][0]++,opts.host)||(cov_2dy2lgt9pt().b[4][1]++,"localhost"));var port=(cov_2dy2lgt9pt().s[18]++,(cov_2dy2lgt9pt().b[5][0]++,opts.port)||(cov_2dy2lgt9pt().b[5][1]++,"8089"));var version=(cov_2dy2lgt9pt().s[19]++,(cov_2dy2lgt9pt().b[6][0]++,opts.version)||(cov_2dy2lgt9pt().b[6][1]++,"default"));var service=(cov_2dy2lgt9pt().s[20]++,new splunkjs.Service({username:username,password:password,scheme:scheme,host:host,port:port,version:version}));// First, we log in
cov_2dy2lgt9pt().s[21]++;service.login(function(err,success){cov_2dy2lgt9pt().f[7]++;cov_2dy2lgt9pt().s[22]++;// We check for both errors in the connection as well
// as if the login itself failed.
if((cov_2dy2lgt9pt().b[8][0]++,err)||(cov_2dy2lgt9pt().b[8][1]++,!success)){cov_2dy2lgt9pt().b[7][0]++;cov_2dy2lgt9pt().s[23]++;console.log("Error in logging in");cov_2dy2lgt9pt().s[24]++;done((cov_2dy2lgt9pt().b[9][0]++,err)||(cov_2dy2lgt9pt().b[9][1]++,"Login failed"));cov_2dy2lgt9pt().s[25]++;return;}else{cov_2dy2lgt9pt().b[7][1]++;}// Now that we're logged in, we can just retrieve system roles!
cov_2dy2lgt9pt().s[26]++;service.roles({user:"admin",app:"search"}).fetch(function(rolesErr,roles){cov_2dy2lgt9pt().f[8]++;cov_2dy2lgt9pt().s[27]++;if(rolesErr){cov_2dy2lgt9pt().b[10][0]++;cov_2dy2lgt9pt().s[28]++;console.log("There was an error retrieving the list of roles:",err);cov_2dy2lgt9pt().s[29]++;done(err);cov_2dy2lgt9pt().s[30]++;return;}else{cov_2dy2lgt9pt().b[10][1]++;}cov_2dy2lgt9pt().s[31]++;console.log("System roles:");var rolesList=(cov_2dy2lgt9pt().s[32]++,roles.list());cov_2dy2lgt9pt().s[33]++;for(var i=(cov_2dy2lgt9pt().s[34]++,0);i<rolesList.length;i++){cov_2dy2lgt9pt().s[35]++;console.log("  "+i+" "+rolesList[i].name);}cov_2dy2lgt9pt().s[36]++;done();});});};cov_2dy2lgt9pt().s[37]++;if(module===require.main){cov_2dy2lgt9pt().b[11][0]++;cov_2dy2lgt9pt().s[38]++;exports.main({},function(){cov_2dy2lgt9pt().f[9]++;});}else{cov_2dy2lgt9pt().b[11][1]++;}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZHBvaW50X2luc3RhbnRpYXRpb24uanMiXSwibmFtZXMiOlsic3BsdW5ranMiLCJyZXF1aXJlIiwiU2VydmljZSIsIlJvbGUiLCJFbnRpdHkiLCJleHRlbmQiLCJwYXRoIiwiUGF0aHMiLCJyb2xlcyIsImVuY29kZVVSSUNvbXBvbmVudCIsIm5hbWUiLCJpbml0Iiwic2VydmljZSIsIm5hbWVzcGFjZSIsIl9zdXBlciIsIlJvbGVzIiwiQ29sbGVjdGlvbiIsImZldGNoT25FbnRpdHlDcmVhdGlvbiIsImluc3RhbnRpYXRlRW50aXR5IiwicHJvcHMiLCJlbnRpdHlOYW1lc3BhY2UiLCJVdGlscyIsIm5hbWVzcGFjZUZyb21Qcm9wZXJ0aWVzIiwicHJvdG90eXBlIiwiZXhwb3J0cyIsIm1haW4iLCJvcHRzIiwiZG9uZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJzY2hlbWUiLCJob3N0IiwicG9ydCIsInZlcnNpb24iLCJsb2dpbiIsImVyciIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwidXNlciIsImFwcCIsImZldGNoIiwicm9sZXNFcnIiLCJyb2xlc0xpc3QiLCJsaXN0IiwiaSIsImxlbmd0aCIsIm1vZHVsZSJdLCJtYXBwaW5ncyI6IndvT0FlWTsyRkFkWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLEdBQUlBLENBQUFBLFFBQVEsMEJBQUdDLE9BQU8sQ0FBQyxnQkFBRCxDQUFWLENBQVosQ0FFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7d0JBQ0FELFFBQVEsQ0FBQ0UsT0FBVCxDQUFpQkMsSUFBakIsQ0FBd0JILFFBQVEsQ0FBQ0UsT0FBVCxDQUFpQkUsTUFBakIsQ0FBd0JDLE1BQXhCLENBQStCLENBQ25EQyxJQUFJLENBQUUsVUFB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QXhCRCxFQXlCSCxDQTlDRCxDLHlCQWdEQSxHQUFJb0IsTUFBTSxHQUFLOUMsT0FBTyxDQUFDd0IsSUFBdkIsQ0FBNkIsc0RBQ3pCRCxPQUFPLENBQUNDLElBQVIsQ0FBYSxFQUFiLENBQWlCLFVBQVcseUJBQUUsQ0FBOUIsRUFDSCxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyBDb3B5cmlnaHQgMjAxNSBTcGx1bmssIEluYy5cbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOiB5b3UgbWF5XG4vLyBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpblxuLy8gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVFxuLy8gV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlXG4vLyBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuLy8gdW5kZXIgdGhlIExpY2Vuc2UuXG5cbnZhciBzcGx1bmtqcyA9IHJlcXVpcmUoJy4uLy4uLy4uL2luZGV4Jyk7XG5cbi8vIFRoaXMgZXhhbXBsZSB3aWxsIHNob3cgeW91IGhvdyB0byBhZGQgYSBuZXcgUkVTVCBBUEkgZW5kcG9pbnRcbi8vIHRvIHRoZSBTcGx1bmsgU0RLIGZvciBKYXZhU2NyaXB0LlxuLy9cbi8vIFRoZSBKYXZhU2NyaXB0IFNESyBoYXMgdGhlIGF1dGhvcml6YXRpb24gcm9sZXMgUkVTVCBBUEkgZW5kcG9pbnRcbi8vIHBhdGggZGVmaW5lZCwgYnV0IGRvZXNuJ3QgaW1wbGVtZW50IGl0LlxuLy8gVG8gYWRkIGEgbmV3IHBhdGgsIHdlIHdvdWxkIGFkZCB0aGUgZm9sbG93aW5nOlxuLy9cbi8vIGBzcGx1bmtqcy5QYXRocy5yb2xlcyA9IFwiYXV0aG9yaXphdGlvbi9yb2xlc1wiO2Bcbi8vXG4vLyBCZSBzdXJlIHRvIGF2b2lkIG5hbWluZyBjb2xsaXNpb25zIVxuLy9cbi8vIERlcGVuZGluZyBvbiB0aGUgZW5kcG9pbnQsIHlvdSBtYXkgbmVlZCB0byBwcmVwZW5kIGAvc2VydmljZXMvYFxuLy8gd2hlbiBkZWZpbmluZyB0aGUgcGF0aC5cbi8vIEZvciBleGFtcGxlIHRoZSBzZXJ2ZXIgaW5mbyBSRVNUIEFQSSBlbmRwb2ludCBwYXRoIGlzIGRlZmluZWQgYXM6XG4vL1xuLy8gYFwiL3NlcnZpY2VzL3NlcnZlci9pbmZvXCJgXG4vL1xuLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHBsZWFzZSByZWZlciB0byB0aGUgUkVTVCBBUEkgZG9jdW1lbnRhdGlvblxuLy8gYXQgaHR0cDovL2RvY3Muc3BsdW5rLmNvbS9Eb2N1bWVudGF0aW9uL1NwbHVuay9sYXRlc3QvUkVTVFJFRi9SRVNUcHJvbG9nXG5cbi8vIEhlcmUgd2UncmUgYWRkaW5nIGEgbmV3IGVudGl0eSB0byBzcGx1bmtqcywgd2hpY2ggd2lsbCBiZVxuLy8gdXNlZCBieSB0aGUgY29sbGVjdGlvbiB3ZSdsbCBhZGQgYmVsb3cuXG5zcGx1bmtqcy5TZXJ2aWNlLlJvbGUgPSBzcGx1bmtqcy5TZXJ2aWNlLkVudGl0eS5leHRlbmQoe1xuICAgIHBhdGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc3BsdW5ranMuUGF0aHMucm9sZXMgKyBcIi9cIiArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLm5hbWUpO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbihzZXJ2aWNlLCBuYW1lLCBuYW1lc3BhY2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fc3VwZXIoc2VydmljZSwgdGhpcy5wYXRoKCksIG5hbWVzcGFjZSk7XG4gICAgfVxufSk7XG5cbi8vIEhlcmUgd2UncmUgYWRkaW5nIGEgbmV3IGNvbGxlY3Rpb24gdG8gc3BsdW5ranMsIHdoaWNoXG4vLyB1c2VzIHRoZSBSb2xlIGVudGl0eSB3ZSBqdXN0IGRlZmluZWQuXG4vLyBTZWUgdGhlIGBpbnN0YW50aWF0ZUVudGl0eSgpYCBmdW5jdGlvbi5cbnNwbHVua2pzLlNlcnZpY2UuUm9sZXMgPSBzcGx1bmtqcy5TZXJ2aWNlLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICBmZXRjaE9uRW50aXR5Q3JlYXRpb246IHRydWUsXG4gICAgXG4gICAgcGF0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzcGx1bmtqcy5QYXRocy5yb2xlcztcbiAgICB9LFxuXG4gICAgaW5zdGFudGlhdGVFbnRpdHk6IGZ1bmN0aW9uKHByb3BzKSB7XG4gICAgICAgIHZhciBlbnRpdHlOYW1lc3BhY2UgPSBzcGx1bmtqcy5VdGlscy5uYW1lc3BhY2VGcm9tUHJvcGVydGllcyhwcm9wcyk7XG4gICAgICAgIHJldHVybiBuZXcgc3BsdW5ranMuU2VydmljZS5Sb2xlKHRoaXMuc2VydmljZSwgcHJvcHMubmFtZSwgZW50aXR5TmFtZXNwYWNlKTtcbiAgICB9LFxuXG4gICAgaW5pdDogZnVuY3Rpb24oc2VydmljZSwgbmFtZXNwYWNlKSB7XG4gICAgICAgIHRoaXMuX3N1cGVyKHNlcnZpY2UsIHRoaXMucGF0aCgpLCBuYW1lc3BhY2UpO1xuICAgIH1cbn0pO1xuXG4vLyBUbyBmaW5pc2ggb2ZmIGludGVncmF0aW5nIHRoZSBuZXcgZW5kcG9pbnQsXG4vLyB3ZSBuZWVkIHRvIGFkZCBhIGZ1bmN0aW9uIHRvIHRoZSBzZXJ2aWNlIG9iamVjdFxuLy8gd2hpY2ggd2lsbCByZXRyaWV2ZSB0aGUgUm9sZXMgY29sbGVjdGlvbi5cbnNwbHVua2pzLlNlcnZpY2UucHJvdG90eXBlLnJvbGVzID0gZnVuY3Rpb24obmFtZXNwYWNlKSB7XG4gICAgcmV0dXJuIG5ldyBzcGx1bmtqcy5TZXJ2aWNlLlJvbGVzKHRoaXMsIG5hbWVzcGFjZSk7XG59O1xuXG5leHBvcnRzLm1haW4gPSBmdW5jdGlvbihvcHRzLCBkb25lKSB7XG4gICAgLy8gVGhpcyBpcyBqdXN0IGZvciB0ZXN0aW5nIC0gaWdub3JlIGl0XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgXG4gICAgdmFyIHVzZXJuYW1lID0gb3B0cy51c2VybmFtZSAgICB8fCBcImFkbWluXCI7XG4gICAgdmFyIHBhc3N3b3JkID0gb3B0cy5wYXNzd29yZCAgICB8fCBcImNoYW5nZWQhXCI7XG4gICAgdmFyIHNjaGVtZSAgID0gb3B0cy5zY2hlbWUgICAgICB8fCBcImh0dHBzXCI7XG4gICAgdmFyIGhvc3QgICAgID0gb3B0cy5ob3N0ICAgICAgICB8fCBcImxvY2FsaG9zdFwiO1xuICAgIHZhciBwb3J0ICAgICA9IG9wdHMucG9ydCAgICAgICAgfHwgXCI4MDg5XCI7XG4gICAgdmFyIHZlcnNpb24gID0gb3B0cy52ZXJzaW9uICAgICB8fCBcImRlZmF1bHRcIjtcbiAgICBcbiAgICB2YXIgc2VydmljZSA9IG5ldyBzcGx1bmtqcy5TZXJ2aWNlKHtcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgIHNjaGVtZTogc2NoZW1lLFxuICAgICAgICBob3N0OiBob3N0LFxuICAgICAgICBwb3J0OiBwb3J0LFxuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uXG4gICAgfSk7XG5cbiAgICAvLyBGaXJzdCwgd2UgbG9nIGluXG4gICAgc2VydmljZS5sb2dpbihmdW5jdGlvbihlcnIsIHN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgZm9yIGJvdGggZXJyb3JzIGluIHRoZSBjb25uZWN0aW9uIGFzIHdlbGxcbiAgICAgICAgLy8gYXMgaWYgdGhlIGxvZ2luIGl0c2VsZiBmYWlsZWQuXG4gICAgICAgIGlmIChlcnIgfHwgIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgaW4gbG9nZ2luZyBpblwiKTtcbiAgICAgICAgICAgIGRvbmUoZXJyIHx8IFwiTG9naW4gZmFpbGVkXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm93IHRoYXQgd2UncmUgbG9nZ2VkIGluLCB3ZSBjYW4ganVzdCByZXRyaWV2ZSBzeXN0ZW0gcm9sZXMhXG4gICAgICAgIHNlcnZpY2Uucm9sZXMoe3VzZXI6XCJhZG1pblwiLCBhcHA6IFwic2VhcmNoXCJ9KS5mZXRjaChmdW5jdGlvbihyb2xlc0Vyciwgcm9sZXMpIHtcbiAgICAgICAgICAgIGlmIChyb2xlc0Vycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlcmUgd2FzIGFuIGVycm9yIHJldHJpZXZpbmcgdGhlIGxpc3Qgb2Ygcm9sZXM6XCIsIGVycik7XG4gICAgICAgICAgICAgICAgZG9uZShlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTeXN0ZW0gcm9sZXM6XCIpO1xuICAgICAgICAgICAgdmFyIHJvbGVzTGlzdCA9IHJvbGVzLmxpc3QoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9sZXNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIgIFwiICsgaSArIFwiIFwiICsgcm9sZXNMaXN0W2ldLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmlmIChtb2R1bGUgPT09IHJlcXVpcmUubWFpbikge1xuICAgIGV4cG9ydHMubWFpbih7fSwgZnVuY3Rpb24oKSB7fSk7XG59Il19