function cov_2kzu2399s0(){var path="/Users/abhis/Documents/python/splunk-sdk-javascript/examples/node/helloworld/firedalerts.js";var hash="baeacfcbf20858fa8cbd48688145ae8cd207c3da";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/abhis/Documents/python/splunk-sdk-javascript/examples/node/helloworld/firedalerts.js",statementMap:{"0":{start:{line:18,column:15},end:{line:18,column:40}},"1":{start:{line:20,column:0},end:{line:88,column:2}},"2":{start:{line:22,column:4},end:{line:22,column:22}},"3":{start:{line:24,column:19},end:{line:24,column:46}},"4":{start:{line:25,column:19},end:{line:25,column:49}},"5":{start:{line:26,column:19},end:{line:26,column:46}},"6":{start:{line:27,column:19},end:{line:27,column:50}},"7":{start:{line:28,column:19},end:{line:28,column:45}},"8":{start:{line:29,column:19},end:{line:29,column:48}},"9":{start:{line:31,column:18},end:{line:38,column:6}},"10":{start:{line:41,column:4},end:{line:87,column:7}},"11":{start:{line:44,column:8},end:{line:48,column:9}},"12":{start:{line:45,column:12},end:{line:45,column:47}},"13":{start:{line:46,column:12},end:{line:46,column:40}},"14":{start:{line:47,column:12},end:{line:47,column:19}},"15":{start:{line:51,column:8},end:{line:86,column:11}},"16":{start:{line:52,column:12},end:{line:56,column:13}},"17":{start:{line:53,column:16},end:{line:53,column:42}},"18":{start:{line:54,column:16},end:{line:54,column:26}},"19":{start:{line:55,column:16},end:{line:55,column:23}},"20":{start:{line:59,column:25},end:{line:59,column:48}},"21":{start:{line:60,column:12},end:{line:60,column:47}},"22":{start:{line:62,column:36},end:{line:76,column:13}},"23":{start:{line:64,column:16},end:{line:64,column:91}},"24":{start:{line:66,column:16},end:{line:74,column:17}},"25":{start:{line:66,column:28},end:{line:66,column:29}},"26":{start:{line:67,column:37},end:{line:67,column:51}},"27":{start:{line:68,column:20},end:{line:72,column:21}},"28":{start:{line:69,column:24},end:{line:71,column:25}},"29":{start:{line:70,column:27},end:{line:70,column:85}},"30":{start:{line:73,column:20},end:{line:73,column:34}},"31":{start:{line:75,column:16},end:{line:75,column:70}},"32":{start:{line:78,column:12},end:{line:83,column:13}},"33":{start:{line:79,column:16},end:{line:82,column:17}},"34":{start:{line:80,column:42},end:{line:80,column:51}},"35":{start:{line:81,column:20},end:{line:81,column:60}},"36":{start:{line:85,column:12},end:{line:85,column:19}},"37":{start:{line:90,column:0},end:{line:92,column:1}},"38":{start:{line:91,column:4},end:{line:91,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:20,column:15},end:{line:20,column:16}},loc:{start:{line:20,column:36},end:{line:88,column:1}},line:20},"1":{name:"(anonymous_1)",decl:{start:{line:41,column:18},end:{line:41,column:19}},loc:{start:{line:41,column:41},end:{line:87,column:5}},line:41},"2":{name:"(anonymous_2)",decl:{start:{line:51,column:41},end:{line:51,column:42}},loc:{start:{line:51,column:73},end:{line:86,column:9}},line:51},"3":{name:"(anonymous_3)",decl:{start:{line:62,column:36},end:{line:62,column:37}},loc:{start:{line:62,column:80},end:{line:76,column:13}},line:62},"4":{name:"(anonymous_4)",decl:{start:{line:91,column:21},end:{line:91,column:22}},loc:{start:{line:91,column:32},end:{line:91,column:34}},line:91}},branchMap:{"0":{loc:{start:{line:22,column:11},end:{line:22,column:21}},type:"binary-expr",locations:[{start:{line:22,column:11},end:{line:22,column:15}},{start:{line:22,column:19},end:{line:22,column:21}}],line:22},"1":{loc:{start:{line:24,column:19},end:{line:24,column:46}},type:"binary-expr",locations:[{start:{line:24,column:19},end:{line:24,column:32}},{start:{line:24,column:39},end:{line:24,column:46}}],line:24},"2":{loc:{start:{line:25,column:19},end:{line:25,column:49}},type:"binary-expr",locations:[{start:{line:25,column:19},end:{line:25,column:32}},{start:{line:25,column:39},end:{line:25,column:49}}],line:25},"3":{loc:{start:{line:26,column:19},end:{line:26,column:46}},type:"binary-expr",locations:[{start:{line:26,column:19},end:{line:26,column:30}},{start:{line:26,column:39},end:{line:26,column:46}}],line:26},"4":{loc:{start:{line:27,column:19},end:{line:27,column:50}},type:"binary-expr",locations:[{start:{line:27,column:19},end:{line:27,column:28}},{start:{line:27,column:39},end:{line:27,column:50}}],line:27},"5":{loc:{start:{line:28,column:19},end:{line:28,column:45}},type:"binary-expr",locations:[{start:{line:28,column:19},end:{line:28,column:28}},{start:{line:28,column:39},end:{line:28,column:45}}],line:28},"6":{loc:{start:{line:29,column:19},end:{line:29,column:48}},type:"binary-expr",locations:[{start:{line:29,column:19},end:{line:29,column:31}},{start:{line:29,column:39},end:{line:29,column:48}}],line:29},"7":{loc:{start:{line:44,column:8},end:{line:48,column:9}},type:"if",locations:[{start:{line:44,column:8},end:{line:48,column:9}},{start:{line:44,column:8},end:{line:48,column:9}}],line:44},"8":{loc:{start:{line:44,column:12},end:{line:44,column:27}},type:"binary-expr",locations:[{start:{line:44,column:12},end:{line:44,column:15}},{start:{line:44,column:19},end:{line:44,column:27}}],line:44},"9":{loc:{start:{line:46,column:17},end:{line:46,column:38}},type:"binary-expr",locations:[{start:{line:46,column:17},end:{line:46,column:20}},{start:{line:46,column:24},end:{line:46,column:38}}],line:46},"10":{loc:{start:{line:52,column:12},end:{line:56,column:13}},type:"if",locations:[{start:{line:52,column:12},end:{line:56,column:13}},{start:{line:52,column:12},end:{line:56,column:13}}],line:52},"11":{loc:{start:{line:69,column:24},end:{line:71,column:25}},type:"if",locations:[{start:{line:69,column:24},end:{line:71,column:25}},{start:{line:69,column:24},end:{line:71,column:25}}],line:69},"12":{loc:{start:{line:79,column:16},end:{line:82,column:17}},type:"if",locations:[{start:{line:79,column:16},end:{line:82,column:17}},{start:{line:79,column:16},end:{line:82,column:17}}],line:79},"13":{loc:{start:{line:90,column:0},end:{line:92,column:1}},type:"if",locations:[{start:{line:90,column:0},end:{line:92,column:1}},{start:{line:90,column:0},end:{line:92,column:1}}],line:90}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"baeacfcbf20858fa8cbd48688145ae8cd207c3da"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2kzu2399s0=function(){return actualCoverage;};}return actualCoverage;}cov_2kzu2399s0();// Copyright 2014 Splunk, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License"): you may
// not use this file except in compliance with the License. You may obtain
// a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
// License for the specific language governing permissions and limitations
// under the License.
// This example will login to Splunk, and then retrieve the list of fired alerts,
// printing each alert's name and properties.
var splunkjs=(cov_2kzu2399s0().s[0]++,require('../../../index'));cov_2kzu2399s0().s[1]++;exports.main=function(opts,done){cov_2kzu2399s0().f[0]++;cov_2kzu2399s0().s[2]++;// This is just for testing - ignore it
opts=(cov_2kzu2399s0().b[0][0]++,opts)||(cov_2kzu2399s0().b[0][1]++,{});var username=(cov_2kzu2399s0().s[3]++,(cov_2kzu2399s0().b[1][0]++,opts.username)||(cov_2kzu2399s0().b[1][1]++,"admin"));var password=(cov_2kzu2399s0().s[4]++,(cov_2kzu2399s0().b[2][0]++,opts.password)||(cov_2kzu2399s0().b[2][1]++,"changed!"));var scheme=(cov_2kzu2399s0().s[5]++,(cov_2kzu2399s0().b[3][0]++,opts.scheme)||(cov_2kzu2399s0().b[3][1]++,"https"));var host=(cov_2kzu2399s0().s[6]++,(cov_2kzu2399s0().b[4][0]++,opts.host)||(cov_2kzu2399s0().b[4][1]++,"localhost"));var port=(cov_2kzu2399s0().s[7]++,(cov_2kzu2399s0().b[5][0]++,opts.port)||(cov_2kzu2399s0().b[5][1]++,"8089"));var version=(cov_2kzu2399s0().s[8]++,(cov_2kzu2399s0().b[6][0]++,opts.version)||(cov_2kzu2399s0().b[6][1]++,"default"));var service=(cov_2kzu2399s0().s[9]++,new splunkjs.Service({username:username,password:password,scheme:scheme,host:host,port:port,version:version}));// First, we log in.
cov_2kzu2399s0().s[10]++;service.login(function(err,success){cov_2kzu2399s0().f[1]++;cov_2kzu2399s0().s[11]++;// We check for both errors in the connection as well
// as if the login itself failed.
if((cov_2kzu2399s0().b[8][0]++,err)||(cov_2kzu2399s0().b[8][1]++,!success)){cov_2kzu2399s0().b[7][0]++;cov_2kzu2399s0().s[12]++;console.log("Error in logging in");cov_2kzu2399s0().s[13]++;done((cov_2kzu2399s0().b[9][0]++,err)||(cov_2kzu2399s0().b[9][1]++,"Login failed"));cov_2kzu2399s0().s[14]++;return;}else{cov_2kzu2399s0().b[7][1]++;}// Now that we're logged in, let's get a listing of all the fired alert groups
cov_2kzu2399s0().s[15]++;service.firedAlertGroups().fetch(function(err,firedAlertGroups){cov_2kzu2399s0().f[2]++;cov_2kzu2399s0().s[16]++;if(err){cov_2kzu2399s0().b[10][0]++;cov_2kzu2399s0().s[17]++;console.log("ERROR",err);cov_2kzu2399s0().s[18]++;done(err);cov_2kzu2399s0().s[19]++;return;}else{cov_2kzu2399s0().b[10][1]++;}// Get the list of all fired alert groups, including the all group (represented by "-")
var groups=(cov_2kzu2399s0().s[20]++,firedAlertGroups.list());cov_2kzu2399s0().s[21]++;console.log("Fired alert groups:");cov_2kzu2399s0().s[22]++;var listGroupCallback=function(err,firedAlerts,firedAlertGroup){cov_2kzu2399s0().f[3]++;cov_2kzu2399s0().s[23]++;// How many times was this alert fired?
console.log(firedAlertGroup.name,"(Count:",firedAlertGroup.count(),")");// Print the properties for each fired alert (default of 30 per alert group)
cov_2kzu2399s0().s[24]++;for(var i=(cov_2kzu2399s0().s[25]++,0);i<firedAlerts.length;i++){var firedAlert=(cov_2kzu2399s0().s[26]++,firedAlerts[i]);cov_2kzu2399s0().s[27]++;for(var key in firedAlert.properties()){cov_2kzu2399s0().s[28]++;if(firedAlert.properties().hasOwnProperty(key)){cov_2kzu2399s0().b[11][0]++;cov_2kzu2399s0().s[29]++;console.log("\t",key,":",firedAlert.properties()[key]);}else{cov_2kzu2399s0().b[11][1]++;}}cov_2kzu2399s0().s[30]++;console.log();}cov_2kzu2399s0().s[31]++;console.log("======================================");};cov_2kzu2399s0().s[32]++;for(var a in groups){cov_2kzu2399s0().s[33]++;if(groups.hasOwnProperty(a)){cov_2kzu2399s0().b[12][0]++;var firedAlertGroup=(cov_2kzu2399s0().s[34]++,groups[a]);cov_2kzu2399s0().s[35]++;firedAlertGroup.list(listGroupCallback);}else{cov_2kzu2399s0().b[12][1]++;}}cov_2kzu2399s0().s[36]++;done();});});};cov_2kzu2399s0().s[37]++;if(module===require.main){cov_2kzu2399s0().b[13][0]++;cov_2kzu2399s0().s[38]++;exports.main({},function(){cov_2kzu2399s0().f[4]++;});}else{cov_2kzu2399s0().b[13][1]++;}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpcmVkYWxlcnRzLmpzIl0sIm5hbWVzIjpbInNwbHVua2pzIiwicmVxdWlyZSIsImV4cG9ydHMiLCJtYWluIiwib3B0cyIsImRvbmUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic2NoZW1lIiwiaG9zdCIsInBvcnQiLCJ2ZXJzaW9uIiwic2VydmljZSIsIlNlcnZpY2UiLCJsb2dpbiIsImVyciIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZmlyZWRBbGVydEdyb3VwcyIsImZldGNoIiwiZ3JvdXBzIiwibGlzdCIsImxpc3RHcm91cENhbGxiYWNrIiwiZmlyZWRBbGVydHMiLCJmaXJlZEFsZXJ0R3JvdXAiLCJuYW1lIiwiY291bnQiLCJpIiwibGVuZ3RoIiwiZmlyZWRBbGVydCIsImtleSIsInByb3BlcnRpZXMiLCJoYXNPd25Qcm9wZXJ0eSIsImEiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiJndE5BZVk7MkZBZlo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUEsR0FBSUEsQ0FBQUEsUUFBUSwwQkFBR0MsT0FBTyxDQUFDLGdCQUFELENBQVYsQ0FBWixDLHdCQUVBQyxPQUFPLENBQUNDLElBQVIsQ0FBZSxTQUFTQyxJQUFULENBQWVDLElBQWYsQ0FBcUIsaURBQ2hDO0FBQ0FELElBQUksQ0FBRyw0QkFBQUEsSUFBSSwrQkFBSSxFQUFKLENBQVgsQ0FFQSxHQUFJRSxDQUFBQSxRQUFRLDBCQUFHLDRCQUFBRixJQUFJLENBQUNFLFFBQUwsK0JBQW9CLE9BQXBCLENBQUgsQ0FBWixDQUNBLEdBQUlDLENBQUFBLFFBQVEsMEJBQUcsNEJBQUFILElBQUksQ0FBQ0csUUFBTCwrQkFBb0IsVUFBcEIsQ0FBSCxDQUFaLENBQ0EsR0FBSUMsQ0FBQUEsTUFBTSwwQkFBSyw0QkFBQUosSUFBSSxDQUFDSSxNQUFMLCtCQUFvQixPQUFwQixDQUFMLENBQVYsQ0FDQSxHQUFJQyxDQUFB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QkFDMUIsR0FBSVQsQ0FBQUEsZUFBZSwyQkFBR0osTUFBTSxDQUFDYSxDQUFELENBQVQsQ0FBbkIsQ0FEMEIseUJBRTFCVCxlQUFlLENBQUNILElBQWhCLENBQXFCQyxpQkFBckIsRUFDSCxDQUhELGtDQUlILENBaEM0RCx5QkFrQzdEbEIsSUFBSSxHQUNQLENBbkNELEVBb0NILENBOUNELEVBK0NILENBcEVELEMseUJBc0VBLEdBQUk4QixNQUFNLEdBQUtsQyxPQUFPLENBQUNFLElBQXZCLENBQTZCLHNEQUN6QkQsT0FBTyxDQUFDQyxJQUFSLENBQWEsRUFBYixDQUFpQixVQUFXLHlCQUFFLENBQTlCLEVBQ0gsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0IFNwbHVuaywgSW5jLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik6IHlvdSBtYXlcbi8vIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluXG4vLyBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXG4vLyBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGVcbi8vIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4vLyB1bmRlciB0aGUgTGljZW5zZS5cblxuLy8gVGhpcyBleGFtcGxlIHdpbGwgbG9naW4gdG8gU3BsdW5rLCBhbmQgdGhlbiByZXRyaWV2ZSB0aGUgbGlzdCBvZiBmaXJlZCBhbGVydHMsXG4vLyBwcmludGluZyBlYWNoIGFsZXJ0J3MgbmFtZSBhbmQgcHJvcGVydGllcy5cblxudmFyIHNwbHVua2pzID0gcmVxdWlyZSgnLi4vLi4vLi4vaW5kZXgnKTtcblxuZXhwb3J0cy5tYWluID0gZnVuY3Rpb24ob3B0cywgZG9uZSkge1xuICAgIC8vIFRoaXMgaXMganVzdCBmb3IgdGVzdGluZyAtIGlnbm9yZSBpdFxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIFxuICAgIHZhciB1c2VybmFtZSA9IG9wdHMudXNlcm5hbWUgICAgfHwgXCJhZG1pblwiO1xuICAgIHZhciBwYXNzd29yZCA9IG9wdHMucGFzc3dvcmQgICAgfHwgXCJjaGFuZ2VkIVwiO1xuICAgIHZhciBzY2hlbWUgICA9IG9wdHMuc2NoZW1lICAgICAgfHwgXCJodHRwc1wiO1xuICAgIHZhciBob3N0ICAgICA9IG9wdHMuaG9zdCAgICAgICAgfHwgXCJsb2NhbGhvc3RcIjtcbiAgICB2YXIgcG9ydCAgICAgPSBvcHRzLnBvcnQgICAgICAgIHx8IFwiODA4OVwiO1xuICAgIHZhciB2ZXJzaW9uICA9IG9wdHMudmVyc2lvbiAgICAgfHwgXCJkZWZhdWx0XCI7XG4gICAgXG4gICAgdmFyIHNlcnZpY2UgPSBuZXcgc3BsdW5ranMuU2VydmljZSh7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICBzY2hlbWU6IHNjaGVtZSxcbiAgICAgICAgaG9zdDogaG9zdCxcbiAgICAgICAgcG9ydDogcG9ydCxcbiAgICAgICAgdmVyc2lvbjogdmVyc2lvblxuICAgIH0pO1xuXG4gICAgLy8gRmlyc3QsIHdlIGxvZyBpbi5cbiAgICBzZXJ2aWNlLmxvZ2luKGZ1bmN0aW9uKGVyciwgc3VjY2Vzcykge1xuICAgICAgICAvLyBXZSBjaGVjayBmb3IgYm90aCBlcnJvcnMgaW4gdGhlIGNvbm5lY3Rpb24gYXMgd2VsbFxuICAgICAgICAvLyBhcyBpZiB0aGUgbG9naW4gaXRzZWxmIGZhaWxlZC5cbiAgICAgICAgaWYgKGVyciB8fCAhc3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBpbiBsb2dnaW5nIGluXCIpO1xuICAgICAgICAgICAgZG9uZShlcnIgfHwgXCJMb2dpbiBmYWlsZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8gTm93IHRoYXQgd2UncmUgbG9nZ2VkIGluLCBsZXQncyBnZXQgYSBsaXN0aW5nIG9mIGFsbCB0aGUgZmlyZWQgYWxlcnQgZ3JvdXBzXG4gICAgICAgIHNlcnZpY2UuZmlyZWRBbGVydEdyb3VwcygpLmZldGNoKGZ1bmN0aW9uKGVyciwgZmlyZWRBbGVydEdyb3Vwcykge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1JcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICBkb25lKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGxpc3Qgb2YgYWxsIGZpcmVkIGFsZXJ0IGdyb3VwcywgaW5jbHVkaW5nIHRoZSBhbGwgZ3JvdXAgKHJlcHJlc2VudGVkIGJ5IFwiLVwiKVxuICAgICAgICAgICAgdmFyIGdyb3VwcyA9IGZpcmVkQWxlcnRHcm91cHMubGlzdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaXJlZCBhbGVydCBncm91cHM6XCIpO1xuXG4gICAgICAgICAgICB2YXIgbGlzdEdyb3VwQ2FsbGJhY2sgPSBmdW5jdGlvbihlcnIsIGZpcmVkQWxlcnRzLCBmaXJlZEFsZXJ0R3JvdXApIHtcbiAgICAgICAgICAgICAgICAvLyBIb3cgbWFueSB0aW1lcyB3YXMgdGhpcyBhbGVydCBmaXJlZD9cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaXJlZEFsZXJ0R3JvdXAubmFtZSwgXCIoQ291bnQ6XCIsIGZpcmVkQWxlcnRHcm91cC5jb3VudCgpLCBcIilcIik7XG4gICAgICAgICAgICAgICAgLy8gUHJpbnQgdGhlIHByb3BlcnRpZXMgZm9yIGVhY2ggZmlyZWQgYWxlcnQgKGRlZmF1bHQgb2YgMzAgcGVyIGFsZXJ0IGdyb3VwKVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBmaXJlZEFsZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyZWRBbGVydCA9IGZpcmVkQWxlcnRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBmaXJlZEFsZXJ0LnByb3BlcnRpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcmVkQWxlcnQucHJvcGVydGllcygpLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFx0XCIsIGtleSwgXCI6XCIsIGZpcmVkQWxlcnQucHJvcGVydGllcygpW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmb3IodmFyIGEgaW4gZ3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3Vwcy5oYXNPd25Qcm9wZXJ0eShhKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyZWRBbGVydEdyb3VwID0gZ3JvdXBzW2FdO1xuICAgICAgICAgICAgICAgICAgICBmaXJlZEFsZXJ0R3JvdXAubGlzdChsaXN0R3JvdXBDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuaWYgKG1vZHVsZSA9PT0gcmVxdWlyZS5tYWluKSB7XG4gICAgZXhwb3J0cy5tYWluKHt9LCBmdW5jdGlvbigpIHt9KTtcbn1cbiJdfQ==