function cov_20b24hud5a(){var path="/Users/abhis/Documents/python/splunk-sdk-javascript/lib/modularinputs/index.js";var hash="43f5bec0d254465f5a5fa7b2dd8dd73678fd7df9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/abhis/Documents/python/splunk-sdk-javascript/lib/modularinputs/index.js",statementMap:{"0":{start:{line:16,column:12},end:{line:16,column:31}},"1":{start:{line:18,column:20},end:{line:28,column:1}},"2":{start:{line:36,column:0},end:{line:86,column:2}},"3":{start:{line:37,column:4},end:{line:85,column:5}},"4":{start:{line:39,column:19},end:{line:39,column:40}},"5":{start:{line:42,column:8},end:{line:42,column:94}},"6":{start:{line:43,column:8},end:{line:43,column:94}},"7":{start:{line:44,column:8},end:{line:44,column:92}},"8":{start:{line:45,column:8},end:{line:45,column:97}},"9":{start:{line:48,column:8},end:{line:48,column:68}},"10":{start:{line:49,column:8},end:{line:49,column:68}},"11":{start:{line:53,column:17},end:{line:53,column:39}},"12":{start:{line:58,column:8},end:{line:62,column:11}},"13":{start:{line:59,column:12},end:{line:61,column:13}},"14":{start:{line:60,column:16},end:{line:60,column:44}},"15":{start:{line:65,column:8},end:{line:84,column:10}},"16":{start:{line:67,column:20},end:{line:67,column:40}},"17":{start:{line:70,column:20},end:{line:70,column:97}},"18":{start:{line:73,column:20},end:{line:73,column:42}},"19":{start:{line:74,column:20},end:{line:74,column:43}},"20":{start:{line:78,column:16},end:{line:80,column:17}},"21":{start:{line:79,column:20},end:{line:79,column:65}},"22":{start:{line:82,column:16},end:{line:82,column:58}},"23":{start:{line:88,column:0},end:{line:88,column:31}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:36,column:24},end:{line:36,column:25}},loc:{start:{line:36,column:50},end:{line:86,column:1}},line:36},"1":{name:"(anonymous_1)",decl:{start:{line:58,column:49},end:{line:58,column:50}},loc:{start:{line:58,column:61},end:{line:62,column:9}},line:58},"2":{name:"(anonymous_2)",decl:{start:{line:66,column:16},end:{line:66,column:17}},loc:{start:{line:66,column:31},end:{line:68,column:17}},line:66},"3":{name:"(anonymous_3)",decl:{start:{line:69,column:16},end:{line:69,column:17}},loc:{start:{line:69,column:31},end:{line:71,column:17}},line:69},"4":{name:"(anonymous_4)",decl:{start:{line:72,column:16},end:{line:72,column:17}},loc:{start:{line:72,column:39},end:{line:75,column:17}},line:72},"5":{name:"(anonymous_5)",decl:{start:{line:77,column:12},end:{line:77,column:13}},loc:{start:{line:77,column:26},end:{line:83,column:13}},line:77}},branchMap:{"0":{loc:{start:{line:37,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:85,column:5}},{start:{line:37,column:4},end:{line:85,column:5}}],line:37},"1":{loc:{start:{line:42,column:30},end:{line:42,column:93}},type:"binary-expr",locations:[{start:{line:42,column:30},end:{line:42,column:43}},{start:{line:42,column:51},end:{line:42,column:93}}],line:42},"2":{loc:{start:{line:43,column:30},end:{line:43,column:93}},type:"binary-expr",locations:[{start:{line:43,column:30},end:{line:43,column:43}},{start:{line:43,column:51},end:{line:43,column:93}}],line:43},"3":{loc:{start:{line:44,column:30},end:{line:44,column:91}},type:"binary-expr",locations:[{start:{line:44,column:30},end:{line:44,column:41}},{start:{line:44,column:51},end:{line:44,column:91}}],line:44},"4":{loc:{start:{line:45,column:30},end:{line:45,column:96}},type:"binary-expr",locations:[{start:{line:45,column:30},end:{line:45,column:46}},{start:{line:45,column:51},end:{line:45,column:96}}],line:45},"5":{loc:{start:{line:48,column:35},end:{line:48,column:67}},type:"binary-expr",locations:[{start:{line:48,column:35},end:{line:48,column:59}},{start:{line:48,column:63},end:{line:48,column:67}}],line:48},"6":{loc:{start:{line:49,column:35},end:{line:49,column:67}},type:"binary-expr",locations:[{start:{line:49,column:35},end:{line:49,column:51}},{start:{line:49,column:63},end:{line:49,column:67}}],line:49},"7":{loc:{start:{line:59,column:12},end:{line:61,column:13}},type:"if",locations:[{start:{line:59,column:12},end:{line:61,column:13}},{start:{line:59,column:12},end:{line:61,column:13}}],line:59},"8":{loc:{start:{line:59,column:16},end:{line:59,column:66}},type:"binary-expr",locations:[{start:{line:59,column:16},end:{line:59,column:17}},{start:{line:59,column:21},end:{line:59,column:28}},{start:{line:59,column:32},end:{line:59,column:41}},{start:{line:59,column:45},end:{line:59,column:66}}],line:59},"9":{loc:{start:{line:78,column:16},end:{line:80,column:17}},type:"if",locations:[{start:{line:78,column:16},end:{line:80,column:17}},{start:{line:78,column:16},end:{line:80,column:17}}],line:78},"10":{loc:{start:{line:82,column:29},end:{line:82,column:56}},type:"cond-expr",locations:[{start:{line:82,column:51},end:{line:82,column:52}},{start:{line:82,column:55},end:{line:82,column:56}}],line:82},"11":{loc:{start:{line:82,column:29},end:{line:82,column:48}},type:"binary-expr",locations:[{start:{line:82,column:29},end:{line:82,column:41}},{start:{line:82,column:45},end:{line:82,column:48}}],line:82}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"43f5bec0d254465f5a5fa7b2dd8dd73678fd7df9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_20b24hud5a=function(){return actualCoverage;};}return actualCoverage;}cov_20b24hud5a();// Copyright 2014 Splunk, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License"): you may
// not use this file except in compliance with the License. You may obtain
// a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
// WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
// License for the specific language governing permissions and limitations
// under the License.
var Async=(cov_20b24hud5a().s[0]++,require('../async'));var ModularInputs=(cov_20b24hud5a().s[1]++,{utils:require("./utils"),ValidationDefinition:require('./validationdefinition'),InputDefinition:require('./inputdefinition'),Event:require('./event'),EventWriter:require('./eventwriter'),Argument:require('./argument'),Scheme:require('./scheme'),ModularInput:require('./modularinput'),Logger:require('./logger')});/**
 * Executes a modular input script.
 *
 * @param {Object} exports An instance of ModularInput representing a modular input.
 * @param {Object} module The module object, used for determining if it's the main module (`require.main`).
 */cov_20b24hud5a().s[2]++;ModularInputs.execute=function(exports,module){cov_20b24hud5a().f[0]++;cov_20b24hud5a().s[3]++;if(require.main===module){cov_20b24hud5a().b[0][0]++;// Slice process.argv ignoring the first argument as it is the path to the node executable.
var args=(cov_20b24hud5a().s[4]++,process.argv.slice(1));// Default empty functions for life cycle events.
cov_20b24hud5a().s[5]++;exports.setup=(cov_20b24hud5a().b[1][0]++,exports.setup)||(cov_20b24hud5a().b[1][1]++,ModularInputs.ModularInput.prototype.setup);cov_20b24hud5a().s[6]++;exports.start=(cov_20b24hud5a().b[2][0]++,exports.start)||(cov_20b24hud5a().b[2][1]++,ModularInputs.ModularInput.prototype.start);cov_20b24hud5a().s[7]++;exports.end=(cov_20b24hud5a().b[3][0]++,exports.end)||(cov_20b24hud5a().b[3][1]++,ModularInputs.ModularInput.prototype.end);cov_20b24hud5a().s[8]++;exports.teardown=(cov_20b24hud5a().b[4][0]++,exports.teardown)||(cov_20b24hud5a().b[4][1]++,ModularInputs.ModularInput.prototype.teardown);// Setup the default values.
cov_20b24hud5a().s[9]++;exports._inputDefinition=(cov_20b24hud5a().b[5][0]++,exports._inputDefinition)||(cov_20b24hud5a().b[5][1]++,null);cov_20b24hud5a().s[10]++;exports._service=(cov_20b24hud5a().b[6][0]++,exports._service)||(cov_20b24hud5a().b[6][1]++,null);// We will call close() on this EventWriter after streaming events, which is handled internally
// by ModularInput.runScript().
var ew=(cov_20b24hud5a().s[11]++,new this.EventWriter());// In order to ensure that everything that is written to stdout/stderr is flushed before we exit,
// set the file handles to blocking. This ensures we exit properly in a timely fashion.
// https://github.com/nodejs/node/issues/6456
cov_20b24hud5a().s[12]++;[process.stdout,process.stderr].forEach(function(s){cov_20b24hud5a().f[1]++;cov_20b24hud5a().s[13]++;if((cov_20b24hud5a().b[8][0]++,s)&&(cov_20b24hud5a().b[8][1]++,s.isTTY)&&(cov_20b24hud5a().b[8][2]++,s._handle)&&(cov_20b24hud5a().b[8][3]++,s._handle.setBlocking)){cov_20b24hud5a().b[7][0]++;cov_20b24hud5a().s[14]++;s._handle.setBlocking(true);}else{cov_20b24hud5a().b[7][1]++;}});var scriptStatus;cov_20b24hud5a().s[15]++;Async.chain([function(done){cov_20b24hud5a().f[2]++;cov_20b24hud5a().s[16]++;exports.setup(done);},function(done){cov_20b24hud5a().f[3]++;cov_20b24hud5a().s[17]++;ModularInputs.ModularInput.runScript(exports,args,ew,process.stdin,done);},function(status,done){cov_20b24hud5a().f[4]++;cov_20b24hud5a().s[18]++;scriptStatus=status;cov_20b24hud5a().s[19]++;exports.teardown(done);}],function(err){cov_20b24hud5a().f[5]++;cov_20b24hud5a().s[20]++;if(err){cov_20b24hud5a().b[9][0]++;cov_20b24hud5a().s[21]++;ModularInputs.Logger.error('',err,ew._err);}else{cov_20b24hud5a().b[9][1]++;}cov_20b24hud5a().s[22]++;process.exit((cov_20b24hud5a().b[11][0]++,scriptStatus)||(cov_20b24hud5a().b[11][1]++,err)?(cov_20b24hud5a().b[10][0]++,1):(cov_20b24hud5a().b[10][1]++,0));});}else{cov_20b24hud5a().b[0][1]++;}};cov_20b24hud5a().s[23]++;module.exports=ModularInputs;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkFzeW5jIiwicmVxdWlyZSIsIk1vZHVsYXJJbnB1dHMiLCJ1dGlscyIsIlZhbGlkYXRpb25EZWZpbml0aW9uIiwiSW5wdXREZWZpbml0aW9uIiwiRXZlbnQiLCJFdmVudFdyaXRlciIsIkFyZ3VtZW50IiwiU2NoZW1lIiwiTW9kdWxhcklucHV0IiwiTG9nZ2VyIiwiZXhlY3V0ZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJtYWluIiwiYXJncyIsInByb2Nlc3MiLCJhcmd2Iiwic2xpY2UiLCJzZXR1cCIsInByb3RvdHlwZSIsInN0YXJ0IiwiZW5kIiwidGVhcmRvd24iLCJfaW5wdXREZWZpbml0aW9uIiwiX3NlcnZpY2UiLCJldyIsInN0ZG91dCIsInN0ZGVyciIsImZvckVhY2giLCJzIiwiaXNUVFkiLCJfaGFuZGxlIiwic2V0QmxvY2tpbmciLCJzY3JpcHRTdGF0dXMiLCJjaGFpbiIsImRvbmUiLCJydW5TY3JpcHQiLCJzdGRpbiIsInN0YXR1cyIsImVyciIsImVycm9yIiwiX2VyciIsImV4aXQiXSwibWFwcGluZ3MiOiIrbExBZVk7MkZBZFo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxHQUFJQSxDQUFBQSxLQUFLLDBCQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFWLENBQVQsQ0FFQSxHQUFJQyxDQUFBQSxhQUFhLDBCQUFHLENBQ2hCQyxLQUFLLENBQUVGLE9BQU8sQ0FBQyxTQUFELENBREUsQ0FFaEJHLG9CQUFvQixDQUFFSCxPQUFPLENBQUMsd0JBQUQsQ0FGYixDQUdoQkksZUFBZSxDQUFFSixPQUFPLENBQUMsbUJBQUQsQ0FIUixDQUloQkssS0FBSyxDQUFFTCxPQUFPLENBQUMsU0FBRCxDQUpFLENBS2hCTSxXQUFXLENBQUVOLE9BQU8sQ0FBQyxlQUFELENBTEosQ0FNaEJPLFFBQVEsQ0FBRVAsT0FBTyxDQUFDLFlBQUQsQ0FORCxDQU9oQlEsTUFBTSxDQUFFUixPQUFPLENBQUMsVUFBRCxDQVBDLENBUWhCUyxZQUFZLENBQUVULE9BQU8sQ0FBQyxnQkFBRCxDQVJMLENBU2hCVSxNQUFNLENBQUVWLE9BQU8sQ0FBQyxVQUFELENBVEMsQ0FBSCxDQUFqQixDQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHLHdCQUNBQyxhQUFhLENBQUNVLE9BQWQsQ0FBd0IsU0FBU0MsT0FBVCxDQUFrQkMsTUFBbEIsQ0FBMEIsaURBQzlDLEdBQUliLE9BQU8sQ0FBQ2MsSUFBUixHQUFpQkQsTUFBckIsQ0FBNkIsNEJBQ3pCO0FBQ0EsR0FBSUUsQ0FBQUEsSUFBSSwwQkFBR0MsT0FBTyxDQUFDQyxJQUFSLENBQWFDLEtBQWIsQ0FBbUIsQ0FBbkIsQ0FBSCxDQUFSLENBRUE7QUFKeUIsd0JBS3pCTixPQUFPLENBQUNPLEtBQVIsQ0FBc0IsNEJBQUFQLE9BQU8sQ0FBQ08sS0FBUiwrQkFBcUJsQixhQUFhLENBQUNRLFlBQWQsQ0FBMkJXLFNBQTNCLENBQXFDRCxLQUExRCxDQUF0QixDQUx5Qix3QkFNekJQLE9BQU8sQ0FBQ1MsS0FBUixDQUFzQiw0QkFBQVQsT0FBTyxDQUFDUyxLQUFSLCtCQUFxQnBCLGFBQWEsQ0FBQ1EsWUFBZCxDQUEyQlcsU0FBM0IsQ0FBcUNDLEtBQTFELENBQXRCLENBTnlCLHdCQU96QlQsT0FBTyxDQUFDVSxHQUFSLENBQXNCLDRCQUFBVixPQUFPLENBQUNVLEdBQVIsK0JBQXFCckIsYUFBYSxDQUFDUSxZQUFkLENBQTJCVyxTQUEzQixDQUFxQ0UsR0FBMUQsQ0FBdEIsQ0FQeUIsd0JBUXpCVixPQUFPLENBQUNXLFFBQVIsQ0FBc0IsNEJBQUFYLE9BQU8sQ0FBQ1csUUFBUiwrQkFBcUJ0QixhQUFhLENBQUNRLFlBQWQsQ0FBMkJXLFNBQTNCLENBQXFDRyxRQUExRCxDQUF0QixDQUVBO0FBVnlCLHdCQVd6QlgsT0FBTyxDQUFDWSxnQkFBUixDQUEyQiw0QkFBQVosT0FBTyxDQUFDWSxnQkFBUiwrQkFBNEIsSUFBNUIsQ0FBM0IsQ0FYeUIseUJBWXpCWixPQUFPLENBQUNhLFFBQVIsQ0FBMkIsNEJBQUFiLE9BQU8sQ0FBQ2EsUUFBUiwrQkFBNEIsSUFBNUIsQ0FBM0IsQ0FFQTtBQUNBO0FBQ0EsR0FBSUMsQ0FBQUEsRUFBRSwyQkFBRyxHQUFJLE1BQUtwQixXQUFULEVBQUgsQ0FBTixDQUVBO0FBQ0E7QUFDQTtBQXBCeUIseUJBcUJ6QixDQUFDVSxPQUFPLENBQUNXLE1BQVQsQ0FBaUJYLE9BQU8sQ0FBQ1ksTUFBekIsRUFBaUNDLE9BQWpDLENBQXlDLFNBQVNDLENBQVQsQ0FBWSxrREFDakQsR0FBSSw0QkFBQUEsQ0FBQywrQkFBSUEsQ0FBQyxDQUFDQyxLQUFOLENBQUQsOEJBQWdCRCxDQUFDLENBQUNFLE9BQWxCLCtCQUE2QkYsQ0FBQyxDQUFDRSxPQUFGLENBQVVDLFdBQXZDLENBQUosQ0FBd0QscURBQ3BESCxDQUFDLENBQUNFLE9BQUYsQ0FBVUMsV0FBVixDQUFzQixJQUF0QixFQUNILENBRkQsaUNBR0gsQ0FKRCxFQU1BLEdBQUlDLENBQUFBLFlBQUosQ0EzQnlCLHlCQTRCekJuQyxLQUFLLENBQUNvQyxLQUFOLENBQVksQ0FDSixTQUFTQyxJQUFULENBQWUsa0RBQ1h4QixPQUFPLENBQUNPLEtBQVIsQ0FBY2lCLElBQWQsRUFDSCxDQUhHLENBSUosU0FBU0EsSUFBVCxDQUFlLGtEQUNYbkMsYUFBYSxDQUFDUSxZQUFkLENBQTJCNEIsU0FBM0IsQ0FBcUN6QixPQUFyQyxDQUE4Q0csSUFBOUMsQ0FBb0RXLEVBQXBELENBQXdEVixPQUFPLENBQUNzQixLQUFoRSxDQUF1RUYsSUFBdkUsRUFDSCxDQU5HLENBT0osU0FBU0csTUFBVCxDQUFpQkgsSUFBakIsQ0FBdUIsa0RBQ25CRixZQUFZLENBQUdLLE1BQWYsQ0FEbUIseUJBRW5CM0IsT0FBTyxDQUFDVyxRQUFSLENBQWlCYSxJQUFqQixFQUNILENBVkcsQ0FBWixDQVlJLFNBQVNJLEdBQVQsQ0FBYyxrREFDVixHQUFJQSxHQUFKLENBQVMscURBQ0x2QyxhQUFhLENBQUNTLE1BQWQsQ0FBcUIrQixLQUFyQixDQUEyQixFQUEzQixDQUErQkQsR0FBL0IsQ0FBb0NkLEVBQUUsQ0FBQ2dCLElBQXZDLEVBQ0gsQ0FGRCxpQ0FEVSx5QkFLVjFCLE9BQU8sQ0FBQzJCLElBQVIsQ0FBYSw2QkFBQVQsWUFBWSxnQ0FBSU0sR0FBSixDQUFaLDhCQUFzQixDQUF0QiwrQkFBMEIsQ0FBMUIsQ0FBYixFQUNILENBbEJMLEVBb0JILENBaERELGlDQWlESCxDQWxERCxDLHlCQW9EQTNCLE1BQU0sQ0FBQ0QsT0FBUCxDQUFpQlgsYUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIENvcHlyaWdodCAyMDE0IFNwbHVuaywgSW5jLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik6IHlvdSBtYXlcbi8vIG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluXG4vLyBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXG4vLyBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGVcbi8vIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4vLyB1bmRlciB0aGUgTGljZW5zZS5cblxudmFyIEFzeW5jID0gcmVxdWlyZSgnLi4vYXN5bmMnKTtcblxudmFyIE1vZHVsYXJJbnB1dHMgPSB7XG4gICAgdXRpbHM6IHJlcXVpcmUoXCIuL3V0aWxzXCIpLFxuICAgIFZhbGlkYXRpb25EZWZpbml0aW9uOiByZXF1aXJlKCcuL3ZhbGlkYXRpb25kZWZpbml0aW9uJyksXG4gICAgSW5wdXREZWZpbml0aW9uOiByZXF1aXJlKCcuL2lucHV0ZGVmaW5pdGlvbicpLFxuICAgIEV2ZW50OiByZXF1aXJlKCcuL2V2ZW50JyksXG4gICAgRXZlbnRXcml0ZXI6IHJlcXVpcmUoJy4vZXZlbnR3cml0ZXInKSxcbiAgICBBcmd1bWVudDogcmVxdWlyZSgnLi9hcmd1bWVudCcpLFxuICAgIFNjaGVtZTogcmVxdWlyZSgnLi9zY2hlbWUnKSxcbiAgICBNb2R1bGFySW5wdXQ6IHJlcXVpcmUoJy4vbW9kdWxhcmlucHV0JyksXG4gICAgTG9nZ2VyOiByZXF1aXJlKCcuL2xvZ2dlcicpXG59O1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgbW9kdWxhciBpbnB1dCBzY3JpcHQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGV4cG9ydHMgQW4gaW5zdGFuY2Ugb2YgTW9kdWxhcklucHV0IHJlcHJlc2VudGluZyBhIG1vZHVsYXIgaW5wdXQuXG4gKiBAcGFyYW0ge09iamVjdH0gbW9kdWxlIFRoZSBtb2R1bGUgb2JqZWN0LCB1c2VkIGZvciBkZXRlcm1pbmluZyBpZiBpdCdzIHRoZSBtYWluIG1vZHVsZSAoYHJlcXVpcmUubWFpbmApLlxuICovXG5Nb2R1bGFySW5wdXRzLmV4ZWN1dGUgPSBmdW5jdGlvbihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBpZiAocmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcbiAgICAgICAgLy8gU2xpY2UgcHJvY2Vzcy5hcmd2IGlnbm9yaW5nIHRoZSBmaXJzdCBhcmd1bWVudCBhcyBpdCBpcyB0aGUgcGF0aCB0byB0aGUgbm9kZSBleGVjdXRhYmxlLlxuICAgICAgICB2YXIgYXJncyA9IHByb2Nlc3MuYXJndi5zbGljZSgxKTtcblxuICAgICAgICAvLyBEZWZhdWx0IGVtcHR5IGZ1bmN0aW9ucyBmb3IgbGlmZSBjeWNsZSBldmVudHMuXG4gICAgICAgIGV4cG9ydHMuc2V0dXAgICAgICAgPSBleHBvcnRzLnNldHVwICAgICB8fCBNb2R1bGFySW5wdXRzLk1vZHVsYXJJbnB1dC5wcm90b3R5cGUuc2V0dXA7XG4gICAgICAgIGV4cG9ydHMuc3RhcnQgICAgICAgPSBleHBvcnRzLnN0YXJ0ICAgICB8fCBNb2R1bGFySW5wdXRzLk1vZHVsYXJJbnB1dC5wcm90b3R5cGUuc3RhcnQ7XG4gICAgICAgIGV4cG9ydHMuZW5kICAgICAgICAgPSBleHBvcnRzLmVuZCAgICAgICB8fCBNb2R1bGFySW5wdXRzLk1vZHVsYXJJbnB1dC5wcm90b3R5cGUuZW5kO1xuICAgICAgICBleHBvcnRzLnRlYXJkb3duICAgID0gZXhwb3J0cy50ZWFyZG93biAgfHwgTW9kdWxhcklucHV0cy5Nb2R1bGFySW5wdXQucHJvdG90eXBlLnRlYXJkb3duO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBkZWZhdWx0IHZhbHVlcy5cbiAgICAgICAgZXhwb3J0cy5faW5wdXREZWZpbml0aW9uID0gZXhwb3J0cy5faW5wdXREZWZpbml0aW9uIHx8IG51bGw7XG4gICAgICAgIGV4cG9ydHMuX3NlcnZpY2UgICAgICAgICA9IGV4cG9ydHMuX3NlcnZpY2UgICAgICAgICB8fCBudWxsO1xuXG4gICAgICAgIC8vIFdlIHdpbGwgY2FsbCBjbG9zZSgpIG9uIHRoaXMgRXZlbnRXcml0ZXIgYWZ0ZXIgc3RyZWFtaW5nIGV2ZW50cywgd2hpY2ggaXMgaGFuZGxlZCBpbnRlcm5hbGx5XG4gICAgICAgIC8vIGJ5IE1vZHVsYXJJbnB1dC5ydW5TY3JpcHQoKS5cbiAgICAgICAgdmFyIGV3ID0gbmV3IHRoaXMuRXZlbnRXcml0ZXIoKTtcblxuICAgICAgICAvLyBJbiBvcmRlciB0byBlbnN1cmUgdGhhdCBldmVyeXRoaW5nIHRoYXQgaXMgd3JpdHRlbiB0byBzdGRvdXQvc3RkZXJyIGlzIGZsdXNoZWQgYmVmb3JlIHdlIGV4aXQsXG4gICAgICAgIC8vIHNldCB0aGUgZmlsZSBoYW5kbGVzIHRvIGJsb2NraW5nLiBUaGlzIGVuc3VyZXMgd2UgZXhpdCBwcm9wZXJseSBpbiBhIHRpbWVseSBmYXNoaW9uLlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzY0NTZcbiAgICAgICAgW3Byb2Nlc3Muc3Rkb3V0LCBwcm9jZXNzLnN0ZGVycl0uZm9yRWFjaChmdW5jdGlvbihzKSB7XG4gICAgICAgICAgICBpZiAocyAmJiBzLmlzVFRZICYmIHMuX2hhbmRsZSAmJiBzLl9oYW5kbGUuc2V0QmxvY2tpbmcpIHtcbiAgICAgICAgICAgICAgICBzLl9oYW5kbGUuc2V0QmxvY2tpbmcodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBzY3JpcHRTdGF0dXM7XG4gICAgICAgIEFzeW5jLmNoYWluKFtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHMuc2V0dXAoZG9uZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIE1vZHVsYXJJbnB1dHMuTW9kdWxhcklucHV0LnJ1blNjcmlwdChleHBvcnRzLCBhcmdzLCBldywgcHJvY2Vzcy5zdGRpbiwgZG9uZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihzdGF0dXMsIGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0U3RhdHVzID0gc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBleHBvcnRzLnRlYXJkb3duKGRvbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIE1vZHVsYXJJbnB1dHMuTG9nZ2VyLmVycm9yKCcnLCBlcnIsIGV3Ll9lcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdChzY3JpcHRTdGF0dXMgfHwgZXJyID8gMSA6IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kdWxhcklucHV0cztcbiJdfQ==